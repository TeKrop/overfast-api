# Container settings
APP_VOLUME_PATH=
APP_PORT=80

# Application settings
APP_BASE_URL=https://overfast-api.tekrop.fr
LOG_LEVEL=info
STATUS_PAGE_URL=
PROFILER=
NEW_ROUTE_PATH=

# Rate limiting
RETRY_AFTER_HEADER=Retry-After
RATE_LIMIT_PER_SECOND_PER_IP=30
RATE_LIMIT_PER_IP_BURST=5
MAX_CONNECTIONS_PER_IP=10

# Adaptive throttling (AutoThrottle + AIMD for Blizzard requests)
THROTTLE_ENABLED=true
THROTTLE_START_DELAY=2.0
THROTTLE_MIN_DELAY=1.0
THROTTLE_MAX_DELAY=30.0
THROTTLE_TARGET_CONCURRENCY=0.5
THROTTLE_PENALTY_DELAY=10.0
THROTTLE_PENALTY_DURATION=60

# Background worker
WORKER_MAX_CONCURRENT_JOBS=10
WORKER_JOB_TIMEOUT=300

# Nginx tuning
# Number of worker processes (0 = auto-detect CPU cores, or set explicit number like 4, 8, etc.)
NGINX_WORKER_PROCESSES=0
NGINX_WORKER_CONNECTIONS=1024
NGINX_MULTI_ACCEPT=true

# Valkey
VALKEY_HOST=valkey
VALKEY_PORT=6379
VALKEY_MEMORY_LIMIT=1gb

# Persistent Storage (PostgreSQL)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=overfast
POSTGRES_USER=overfast
POSTGRES_PASSWORD=overfast
POSTGRES_POOL_MIN_SIZE=2
POSTGRES_POOL_MAX_SIZE=10

# Unknown players cache system
UNKNOWN_PLAYERS_CACHE_ENABLED=true
UNKNOWN_PLAYER_COOLDOWN_KEY_PREFIX=unknown-player:cooldown
UNKNOWN_PLAYER_BASE_RETRY_AFTER=600
UNKNOWN_PLAYER_RETRY_MULTIPLIER=3
UNKNOWN_PLAYER_MAX_RETRY_AFTER=21600

# Cache configuration
CACHE_TTL_HEADER=X-Cache-TTL
HEROES_PATH_CACHE_TIMEOUT=86400
HERO_PATH_CACHE_TIMEOUT=86400
CSV_CACHE_TIMEOUT=86400
CAREER_PATH_CACHE_TIMEOUT=600
SEARCH_ACCOUNT_PATH_CACHE_TIMEOUT=600
HERO_STATS_CACHE_TIMEOUT=3600
PLAYER_PROFILE_MAX_AGE=604800

# SWR staleness thresholds
HEROES_STALENESS_THRESHOLD=86400  # 24 hours
MAPS_STALENESS_THRESHOLD=86400
GAMEMODES_STALENESS_THRESHOLD=86400
ROLES_STALENESS_THRESHOLD=86400
PLAYER_STALENESS_THRESHOLD=3600  # 1 hour
STALE_CACHE_TIMEOUT=60

# Critical error Discord webhook
DISCORD_WEBHOOK_ENABLED=false
DISCORD_WEBHOOK_URL=""
DISCORD_MESSAGE_ON_RATE_LIMIT=false

# Monitoring (optional)
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
PROMETHEUS_NGINX_PORT=9145
VALKEY_EXPORTER_PORT=9121
POSTGRES_EXPORTER_PORT=9187

GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_SERVER_ROOT_URL=%(protocol)s://%(domain)s:%(http_port)s/

SENTRY_DSN=
